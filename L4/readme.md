# Лабораторная №4 (Обработка форм в PHP)
## Описание и цель лабораторной работы.
* Цель лабораторной работы "Обработка форм в PHP" состоит в том, чтобы научиться обрабатывать данные, отправленные через веб-формы, с использованием языка программирования PHP. В процессе выполнения этой работы изучить основные концепции работы с формами в веб-разработке и научиться использовать PHP для эффективной обработки данных, полученных из форм на веб-страницах.

* В рамках выполнения этой работы были созданы создают веб-формы с различными элементами ввода (текстовые поля, флажки, радиокнопки и т.д.), а затем написание скриптов на PHP для обработки и вывода данных, полученных из этих форм. Это позволяет научиться эффективно обрабатывать информацию, отправленную пользователями на веб-сайт, и создавать интерактивные веб-приложения.
## Краткая документация к проекту и примеры использования кода.
### Задание №1 (Работа с глобальной переменной $_POST)
```php
// Проверка наличия данных в массиве $_POST
        if (isset($_POST["name"]) && isset($_POST["email"]) && isset($_POST["review"]) && isset($_POST["comment"]))
```
`$_POST` - это глобальный массив в PHP, который содержит данные, отправленные на сервер методом POST из веб-формы. Каждый элемент массива `$_POST` соответствует элементу формы, где ключом является атрибут `name` элемента формы. Например, если в форме есть поле с атрибутом `name="username"`, то после отправки формы значение этого поля будет доступно в массиве `$_POST['username']`.

`$_SERVER["PHP_SELF"]` - это глобальная переменная в PHP, которая содержит имя текущего исполняемого скрипта. Она используется в формах для отправки данных на сервер самому себе. Когда форма отправляется на страницу, указанную в атрибуте `action`, PHP интерпретирует это как запрос к другому файлу. Однако использование `$_SERVER["PHP_SELF"]` позволяет отправлять данные обратно на текущую страницу для их обработки, что упрощает разработку и поддержку веб-приложений.

### Задание №2 (Получение данных с различных контроллеров)
```php
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        // Получение данных из формы
        $quantity = $_POST["quantity"];
        $product = $_POST["product"];

        // Вывод данных на экран
        echo "<h3>Ваш заказ:</h3>";
        echo "<p>Количество товаров: <strong>$quantity</strong></p>";
        echo "<p>Выбранный продукт: <strong>$product</strong></p>";
    }
```
Этот отрывок кода демонстрирует процесс получения данных из формы, отправленной пользователем. Далее идут две строки, в которых данные из формы сохраняются в переменные `$quantity` и `$product`. Данные получаются из массива `$_POST`, где ключи массива соответствуют атрибутам name элементов формы.
### Задание №3 (Создание, обработка и валидация форм)
```php
<!DOCTYPE html>
<html lang="en">
<head>
<h1>Задание 3</h1>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation</title>
</head>
<body>
    <h1>Form Validation</h1>
    <form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" minlength="3" maxlength="20" pattern="^[^0-9]+$" required>
        <br><br>
        <label for="mail">Mail:</label>
        <input type="email" id="mail" name="mail" required>
        <br><br>
        <label for="comment">Comment:</label>
        <textarea id="comment" name="comment" rows="4" cols="50" required></textarea>
        <br><br>
        <input type="checkbox" id="data-processing" name="data-processing" required>
        <label for="data-processing">Do you agree with data processing?</label>
        <br><br>
        <input type="submit" name="submit" value="Submit">
    </form>

    <?php
    if ($_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST['submit'])) {
        // Обработка данных формы
        $name = $_POST["name"];
        $mail = $_POST["mail"];
        $comment = $_POST["comment"];

        // Проверка успешной обработки и вывод сообщения
        echo "<p style='color: green;'>Форма успешно заполнена!</p>";
    }
    ?>
</body>
</html>
```
Этот код представляет собой веб-страницу с формой, где пользователь может ввести своё имя, адрес электронной почты, комментарий и отметить согласие на обработку данных. 

1. Форма отправляется на ту же страницу (`$_SERVER["PHP_SELF"]`) методом POST.

2. Валидация данных на стороне клиента:
   - Поле "Name" (Имя) требует ввода от 3 до 20 символов, только буквенных символов (без цифр).
   - Поле "Mail" (Почта) проверяет, что введенный адрес соответствует формату электронной почты.
   - Все поля обязательны для заполнения.

3. После отправки формы и при наличии данных (`$_SERVER["REQUEST_METHOD"] == "POST" && isset($_POST['submit'])`), данные из формы обрабатываются на сервере:
   - Получаются значения из массива `$_POST`.
   - Если данные успешно обработаны, выводится сообщение "Форма успешно заполнена!" в зеленом цвете.



####  Чем отличается глобальная переменная $_REQUEST и $_POST?
Глобальная переменная `$_POST` содержит данные, отправленные на сервер методом POST из веб-формы. В то время как глобальная переменная `$_REQUEST` включает в себя данные, отправленные на сервер методами GET и POST, а также данные, полученные из куки (cookie). Таким образом, `$_POST` содержит только данные, отправленные методом POST, тогда как `$_REQUEST` содержит данные, отправленные методами POST и GET, а также данные из куки.
### Задание №4 (Создание формы)
```php
<form action="<?php echo $_SERVER["PHP_SELF"]; ?>" method="post">
        <label for="name">Введите ваше имя:</label>
        <input type="text" id="name" name="name" required>
        <br><br>
        
        <p>Вопрос 1: Какой ваш любимый цвет?</p>
        <input type="radio" id="color_red" name="color" value="red">
        <label for="color_red">Красный</label><br>
        <input type="radio" id="color_blue" name="color" value="blue">
        <label for="color_blue">Синий</label><br>
        <input type="radio" id="color_green" name="color" value="green">
        <label for="color_green">Зеленый</label><br><br>

        <p>Вопрос 2: Какие виды спорта вы предпочитаете?</p>
        <input type="checkbox" id="sport_football" name="sports[]" value="football">
        <label for="sport_football">Футбол</label><br>
        <input type="checkbox" id="sport_basketball" name="sports[]" value="basketball">
        <label for="sport_basketball">Баскетбол</label><br>
        <input type="checkbox" id="sport_tennis" name="sports[]" value="tennis">
        <label for="sport_tennis">Теннис</label><br><br>

        <label for="question3">Вопрос 3: Сколько часов вы обычно спите в ночь?</label>
        <input type="number" id="question3" name="sleep_hours" min="0" required>
        <br><br>

        <input type="submit" value="Отправить">
    </form>
```
1. Форма отправляется на ту же страницу (`$_SERVER["PHP_SELF"]`) методом POST.
2. Пользователю необходимо ввести своё имя и ответить на несколько вопросов.
3. Вопросы представлены различными типами контроллеров ввода: текстовым полем, радиокнопками, флажками (checkbox) и числовым полем.
4. После отправки формы данные обрабатываются на стороне сервера. Полученные ответы выводятся на экран в разделе "Результаты теста".

### Вывод 
Основные шаги обработки форм в PHP включают получение данных из массивов $_GET, $_POST или $_REQUEST, их проверку, обработку и отображение результатов. Грамотная обработка форм позволяет создавать интерактивные и функциональные веб-приложения, которые эффективно взаимодействуют с пользователями.